import React from "react";

export default function Item(props) {

    const Copy = () => {
        navigator.clipboard.writeText(props.item.item)
            .catch(err => {
                console.log('Something went wrong', err)
            })
    }

    const changeItem = (e) => {
        const el = document.querySelector('.tast--content__' + props.item.index)
        const btns = document.querySelectorAll(`.task[data-id]`)[props.item.index].querySelectorAll('.btn__image')
        btns[0].classList.add('hide')
        btns[1].classList.add('hide')
        el.innerHTML = `<input type='text' class="task--content--change" value='${props.item.item}'/>`
        const input = el.children[0]
        input.focus()
        input.selectionStart = input.value.length;
        input.addEventListener('keypress', (e) => {
            if (e.key === "Enter") {
                props.changeItem()(input.value, props.item.index)
                btns[0].classList.remove('hide')
                btns[1].classList.remove('hide')
            }
        })
    }

    return (
        <div className='task' data-id={props.item.index}>
            <div className='task--content'>
                <input type="checkbox" onChange={() => props.addCompleted()(props.item.index)} checked={false}/>
                <span className={'tast--content__' + props.item.index}>{props.item.item}</span>
            </div>
            <div className='task__btn'>
                <button className='btn__image' onClick={changeItem}>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.16669 3.33335H3.33335C2.89133 3.33335 2.4674 3.50895 2.15484 3.82151C1.84228 4.13407 1.66669 4.55799 1.66669 5.00002V16.6667C1.66669 17.1087 1.84228 17.5326 2.15484 17.8452C2.4674 18.1578 2.89133 18.3333 3.33335 18.3333H15C15.442 18.3333 15.866 18.1578 16.1785 17.8452C16.4911 17.5326 16.6667 17.1087 16.6667 16.6667V10.8334" stroke="#5A7FFF" strokeLinecap="round" strokeLinejoin="round"/>
                        <path d="M15.4167 2.08333C15.7482 1.75181 16.1978 1.56556 16.6667 1.56556C17.1355 1.56556 17.5852 1.75181 17.9167 2.08333C18.2482 2.41485 18.4345 2.86449 18.4345 3.33333C18.4345 3.80217 18.2482 4.25181 17.9167 4.58333L10 12.5L6.66669 13.3333L7.50002 9.99999L15.4167 2.08333Z" stroke="#5A7FFF" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                </button>
                <button className='btn__image' onClick={Copy}>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6.38867 5.13965V6.11182H4.93042C4.12505 6.11182 3.47217 6.7647 3.47217 7.57007V16.3196C3.47217 17.125 4.12505 17.7778 4.93042 17.7778H11.7356C12.541 17.7778 13.1938 17.125 13.1938 16.3196V14.8613H14.166V16.3196C14.166 17.6619 13.0779 18.75 11.7356 18.75H4.93042C3.58814 18.75 2.5 17.6619 2.5 16.3196V7.57007C2.5 6.22779 3.58814 5.13965 4.93042 5.13965H6.38867ZM14.166 2.22315H8.81909C8.01372 2.22315 7.36084 2.87603 7.36084 3.6814V12.4309C7.36084 13.2363 8.01372 13.8892 8.81909 13.8892H15.6243C16.4296 13.8892 17.0825 13.2363 17.0825 12.4309V5.13965H14.6521C14.3836 5.13965 14.166 4.92203 14.166 4.65357V2.22315ZM18.0547 4.68077V12.4309C18.0547 13.7732 16.9666 14.8613 15.6243 14.8613H8.81909C7.47681 14.8613 6.38867 13.7732 6.38867 12.4309V3.6814C6.38867 2.33912 7.47681 1.25098 8.81909 1.25098H14.6249C14.754 1.2428 14.8883 1.28582 14.9958 1.39335L17.9123 4.30986C18.0198 4.41739 18.0629 4.55172 18.0547 4.68077ZM15.1382 4.16749H16.3951L15.1382 2.91058V4.16749ZM9.79126 10.9727C9.5228 10.9727 9.30518 10.755 9.30518 10.4866C9.30518 10.2181 9.5228 10.0005 9.79126 10.0005H11.7356C12.0041 10.0005 12.2217 10.2181 12.2217 10.4866C12.2217 10.755 12.0041 10.9727 11.7356 10.9727H9.79126ZM9.79126 9.02833C9.5228 9.02833 9.30518 8.8107 9.30518 8.54224C9.30518 8.27379 9.5228 8.05616 9.79126 8.05616H14.6521C14.9206 8.05616 15.1382 8.27379 15.1382 8.54224C15.1382 8.8107 14.9206 9.02833 14.6521 9.02833H9.79126ZM9.79126 7.08399C9.5228 7.08399 9.30518 6.86636 9.30518 6.59791C9.30518 6.32945 9.5228 6.11182 9.79126 6.11182H14.6521C14.9206 6.11182 15.1382 6.32945 15.1382 6.59791C15.1382 6.86636 14.9206 7.08399 14.6521 7.08399H9.79126Z" fill="#A3A3A3"/>
                    </svg>
                </button>
                <button className='btn__image' onClick={() => props.removeItem()(props.item.index)}>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.6667 18.6666H7.33333C6.44928 18.6666 5.60143 18.3155 4.97631 17.6903C4.35119 17.0652 4 16.2174 4 15.3333V7.33332C4 7.1565 4.07024 6.98694 4.19526 6.86191C4.32029 6.73689 4.48986 6.66665 4.66667 6.66665C4.84348 6.66665 5.01305 6.73689 5.13807 6.86191C5.2631 6.98694 5.33333 7.1565 5.33333 7.33332V15.3333C5.33333 15.8637 5.54405 16.3725 5.91912 16.7475C6.29419 17.1226 6.8029 17.3333 7.33333 17.3333H12.6667C13.1971 17.3333 13.7058 17.1226 14.0809 16.7475C14.456 16.3725 14.6667 15.8637 14.6667 15.3333V7.33332C14.6667 7.1565 14.7369 6.98694 14.8619 6.86191C14.987 6.73689 15.1565 6.66665 15.3333 6.66665C15.5101 6.66665 15.6797 6.73689 15.8047 6.86191C15.9298 6.98694 16 7.1565 16 7.33332V15.3333C16 16.2174 15.6488 17.0652 15.0237 17.6903C14.3986 18.3155 13.5507 18.6666 12.6667 18.6666Z" fill="#FF6363"/>
                        <path d="M16.6667 5.33332H3.33335C3.15654 5.33332 2.98697 5.26308 2.86195 5.13806C2.73693 5.01303 2.66669 4.84346 2.66669 4.66665C2.66669 4.48984 2.73693 4.32027 2.86195 4.19525C2.98697 4.07022 3.15654 3.99998 3.33335 3.99998H16.6667C16.8435 3.99998 17.0131 4.07022 17.1381 4.19525C17.2631 4.32027 17.3334 4.48984 17.3334 4.66665C17.3334 4.84346 17.2631 5.01303 17.1381 5.13806C17.0131 5.26308 16.8435 5.33332 16.6667 5.33332Z" fill="#FF6363"/>
                        <path d="M12.6667 5.33333H7.33335C7.15654 5.33333 6.98697 5.26309 6.86195 5.13807C6.73693 5.01304 6.66669 4.84347 6.66669 4.66666V3.33333C6.66669 2.8029 6.8774 2.29419 7.25247 1.91911C7.62755 1.54404 8.13625 1.33333 8.66669 1.33333H11.3334C11.8638 1.33333 12.3725 1.54404 12.7476 1.91911C13.1226 2.29419 13.3334 2.8029 13.3334 3.33333V4.66666C13.3334 4.84347 13.2631 5.01304 13.1381 5.13807C13.0131 5.26309 12.8435 5.33333 12.6667 5.33333ZM8.00002 4H12V3.33333C12 3.15652 11.9298 2.98695 11.8048 2.86192C11.6797 2.7369 11.5102 2.66666 11.3334 2.66666H8.66669C8.48988 2.66666 8.32031 2.7369 8.19528 2.86192C8.07026 2.98695 8.00002 3.15652 8.00002 3.33333V4Z" fill="#FF6363"/>
                        <path d="M8.66673 14.6667C8.48992 14.6667 8.32035 14.5964 8.19532 14.4714C8.0703 14.3464 8.00006 14.1768 8.00006 14V9.33334C8.00006 9.15653 8.0703 8.98696 8.19532 8.86193C8.32035 8.73691 8.48992 8.66667 8.66673 8.66667C8.84354 8.66667 9.01311 8.73691 9.13813 8.86193C9.26316 8.98696 9.33339 9.15653 9.33339 9.33334V14C9.33339 14.1768 9.26316 14.3464 9.13813 14.4714C9.01311 14.5964 8.84354 14.6667 8.66673 14.6667Z" fill="#FF6363"/>
                        <path d="M11.3334 14.6667C11.1565 14.6667 10.987 14.5964 10.8619 14.4714C10.7369 14.3464 10.6667 14.1768 10.6667 14V9.33334C10.6667 9.15653 10.7369 8.98696 10.8619 8.86193C10.987 8.73691 11.1565 8.66667 11.3334 8.66667C11.5102 8.66667 11.6797 8.73691 11.8048 8.86193C11.9298 8.98696 12 9.15653 12 9.33334V14C12 14.1768 11.9298 14.3464 11.8048 14.4714C11.6797 14.5964 11.5102 14.6667 11.3334 14.6667Z" fill="#FF6363"/>
                    </svg>
                </button>
            </div>
        </div>
    );
}
